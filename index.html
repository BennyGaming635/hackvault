<head>
  <title>Hackvault</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="window" id="window">
  <div class="titlebar" id="titlebar">
    Hackvault Terminal
  </div>

  <div class="window-content">
  <div class="terminal">
    <h1>Welcome to the Hackvault Terminal</h1>
    <p>Type help to see all commands.</p>

    <div class="line">
      <span class="prompt">&gt;</span>
      <input id="cmd" autofocus />
      <span class="cursor"></span>
    </div>

    <div class="output" id="output"></div>
  </div>
<script>
const win = document.getElementById("window");
const bar = document.getElementById("titlebar");

let offsetX = 0, offsetY = 0, dragging = false;

bar.addEventListener("mousedown", (e) => {
  dragging = true;
  offsetX = e.clientX - win.offsetLeft;
  offsetY = e.clientY - win.offsetTop;
});

document.addEventListener("mousemove", (e) => {
  if (!dragging) return;
  win.style.left = (e.clientX - offsetX) + "px";
  win.style.top = (e.clientY - offsetY) + "px";
});

document.addEventListener("mouseup", () => {
  dragging = false;
});
</script>
<script>
  const input = document.getElementById("cmd");
  const output = document.getElementById("output");
  const root = document.documentElement;

  input.addEventListener("keydown", (e) => {
    if (e.key !== "Enter") return;

    const cmd = input.value.trim().toLowerCase();
    input.value = "";

    if (cmd === "help") {
      output.textContent =
`Available commands:
- help - reopen this window.
- thisisntanactualcodebutithinkthekonamicodemightdosomething - idk something?
- submit - opens the submission form.
- about - information about this ysws.
- slack - links to the Hack Club slack.
- dark - dark mode!
- gallery - see all the epic submissions.
- clear - clear the chat.
- changelog - shows whats happened in each terminal update.
- guides - some guides we think might help.
- light - scary light mode :( `;
    } else if (cmd === "dark") {
      root.classList.add("dark");
      output.textContent = "Dark mode enabled.";
    } else if (cmd === "guides") {
      output.textContent = `
      Thanks for running the GUIDE utility.
      Here are some guides I recommend;
      - https://www.youtube.com/watch?v=w68BBPDAWr8&pp=ygUeSG93IHRvIG1ha2UgYSBwYXNzd29yZCBtYW5hZ2Vy (How Password Managers Work - Computerphile)
      `;
    } else if (cmd === "light") {
      root.classList.remove("dark");
      output.textContent = "Light mode enabled.";
    } else if (cmd === "thisisntanactualcodebutithinkthekonamicodemightdosomething") {
      output.textContent = "You were really close. I wonder what happens if you try the Konami code? Maybe type it out?";
    } else if (cmd === "upupdowndownleftrightleftrightbastart") {
      output.textContent = "You've activated the secret code. In #hackvault just send 'im yellow' with no context and see if people figure it out.";
    } else if (cmd === "submit") {
      window.location.href = "https://forms.hackclub.com/t/9vXhfzDvfrus";
    } else if (cmd === "about") {
      output.textContent =
`ooo welcome to Hackvault!
We're so excited you're here, this is the epic ysws for people like you!
So in this ysws, it's simples. you make a password manager in whatever language you like and then if you log 5 or 10 hours on hackatime, we ship you a yubikey 5C or yubikey bio respectfully!
If you're wondering what you can make, well as long as you use something open source, or cool and it abides by the code of conduct well then sure! We don't want to limit you but it MUST BE DIGITAL (No hardware stuff pls).
oki byeee <3 BennyGaming635

P.S If you're ready to submit please type 'submit'.`;
    } else if (cmd === "slack") {
      window.location.href = "https://hackclub.com/slack";
    } else if (cmd === "changelog") {
      output.textContent = "Changelog:\n- v1.4: Added new secret and also a video how to make a password manager. \n- v1.3: Added new about context and merged about page & gallery\n- v1.2: Added dark/light mode\n- v1.1: Fixed submit link\n- v1.0: Initial release";
    } else if (cmd === "gallery") {
      output.textContent = "Opening gallery…";
      renderGallery();
    } else if (cmd === "clear") {
      output.textContent = "";
      view.innerHTML = "";
    } else {
      output.textContent = "Unknown command. Type 'help'.";
    }
  });
</script>
<div id="view"></div>
<script>
  const view = document.getElementById("view");

async function renderGallery() {
  view.innerHTML = "Loading projects…";

  const USER = "BennyGaming635";
  const REPO = "Hackvault";
  const BASE = `https://api.github.com/repos/${USER}/${REPO}/contents/projects`;

  const res = await fetch(BASE);
  const items = await res.json();

  const grid = document.createElement("div");
  grid.className = "gallery";

  for (const item of items) {
    if (item.type !== "dir") continue;

    try {
      const r = await fetch(`${BASE}/${item.name}/README.md`);
      const readme = await r.json();
      const text = atob(readme.content);

      const lines = text.split("\n").map(l => l.trim());
      const title = lines.find(l => l.startsWith("# "))?.replace("# ", "") || item.name;
      const submissionName = lines.find(l => l.startsWith("## "))?.replace(/^##\s+/, "") || "Unnamed submission";
      const desc = lines.find(l => l && !l.startsWith("#")) || "No description.";

      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <h2>${title}</h2>
        <p><strong>${submissionName}</strong></p>
        <p>${desc}</p>
        <a href="${readme.html_url}" target="_blank">README</a>
      `;

      grid.appendChild(card);
    } catch {}
  }

  view.innerHTML = "";
  view.appendChild(grid);
}
</script>
</div>
</body>
</html>

